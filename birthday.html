<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For My Love ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Poppins:wght@300;400&display=swap" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins', sans-serif;
}
body{
    background: radial-gradient(circle at top,#1b0033,#000);
    min-height:100vh;
    overflow-x:hidden;
    color:#fff;
}

/* Center */
.center{
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
    min-height:100vh;
    padding:20px;
}

/* Gift Box */
.gift{
    width:160px;
    height:160px;
    background:linear-gradient(145deg,#ff4d6d,#c9184a);
    border-radius:16px;
    position:relative;
    cursor:pointer;
    box-shadow:0 0 40px rgba(255,77,109,0.8);
    transition:transform 0.4s;
}
.gift:hover{ transform:scale(1.08); }
.gift::before{
    content:'';
    position:absolute;
    width:100%;
    height:35px;
    background:#ff758f;
    top:-35px;
    border-radius:16px 16px 0 0;
}
.ribbon{
    position:absolute;
    width:22px;
    height:100%;
    background:#fff;
    left:50%;
    transform:translateX(-50%);
}

/* Hidden */
.hidden{ display:none; }

/* Memories */
.memories{ max-width:700px; }
.card{
    background:rgba(255,255,255,0.12);
    backdrop-filter:blur(10px);
    border-radius:18px;
    padding:22px;
    margin:18px 0;
    box-shadow:0 0 20px rgba(255,105,180,0.3);
    animation:fadeUp 1s ease;
}
@keyframes fadeUp{
    from{opacity:0; transform:translateY(40px);}
    to{opacity:1; transform:translateY(0);}
}

/* Love Letter */
.letter{
    font-family:'Dancing Script', cursive;
    font-size:1.6rem;
    background:rgba(0,0,0,0.6);
    padding:35px;
    border-radius:22px;
    max-width:850px;
    margin:auto;
    line-height:1.9;
    box-shadow:0 0 40px rgba(255,182,193,0.4);
}

/* Hearts */
.heart{
    position:fixed;
    bottom:-20px;
    animation:float 7s linear infinite;
    opacity:0.8;
}
@keyframes float{
    from{transform:translateY(0); opacity:1;}
    to{transform:translateY(-120vh); opacity:0;}
}

/* Button */
button{
    margin-top:25px;
    padding:14px 30px;
    border:none;
    border-radius:30px;
    background:linear-gradient(145deg,#ff4d6d,#ff758f);
    color:#fff;
    font-size:1rem;
    cursor:pointer;
    box-shadow:0 0 20px rgba(255,77,109,0.7);
}
button:hover{ transform:scale(1.05); }

/* Mute button */
#muteBtn{
    position:fixed;
    top:15px;
    right:15px;
    z-index:999;
}

/* Video */
/* Make the video responsive: fill available width but stay within viewport */
video{
    width:30%;
    max-width:90vw;
    height:auto;
    border-radius:20px;
    box-shadow:0 0 40px rgba(255,105,180,0.6);
}

/* Optional visual when playing */
video.playing{
    box-shadow:0 0 60px rgba(255,105,180,0.9);
    transform:scale(1.01);
}
.floating-img{
    position:fixed;
    bottom:-120px;
    width:70px;
    height:70px;
    object-fit:cover;
    border-radius:50%;
    box-shadow:0 0 20px rgba(255,182,193,0.8);
    animation:float 9s linear forwards;
    opacity:0.9;
}
.final-text{
    font-family:'Dancing Script', cursive;
    font-size:2rem;
    margin-top:20px;
    line-height:2;
    text-shadow:0 0 20px rgba(255,105,180,0.9);
}

/* Flying kiss */
.kiss{
    position:fixed;
    bottom:-30px;
    font-size:28px;
    animation:kissFly 5s linear forwards;
    opacity:0.9;
}

@keyframes kissFly{
    from{
        transform:translateY(0) scale(1);
        opacity:1;
    }
    to{
        transform:translateY(-110vh) scale(1.5);
        opacity:0;
    }
}


</style>
</head>
<body>

<!-- Audio -->
<audio id="bgMusic" loop preload="auto">
    <source src="music.mp3" type="audio/mpeg">
</audio>

<button id="muteBtn" onclick="toggleMusic()">üîä</button>

<!-- Landing -->
<section id="landing" class="center">
    <h1>I have something special for you üéÅ</h1>
    <br>
    <div class="gift" onclick="openGift()">
        <div class="ribbon"></div>
    </div>
    <p style="margin-top:20px;">Click the gift</p>
</section>

<!-- Memories -->
<section id="memories" class="center hidden">
    <h1>Our Memories üí≠</h1>
    <div class="memories">
        <div class="card">üí¨ The first message that started everything.</div>
        <div class="card">üåô Late-night chats that felt endless.</div>
        <div class="card">üòÇ Laughing at the smallest things.</div>
        <div class="card">‚ù§Ô∏è No photos, but countless feelings.</div>
    </div>
    <button onclick="showLetter()">Open the Letter üíå</button>
</section>

<!-- Letter -->
<section id="letterSection" class="center hidden">
    <h1>For You ‚ù§Ô∏è</h1>
    <div class="letter" id="letter"></div>
</section>

<!-- Video -->
<section id="videoSection" class="center hidden">
    <h1>One More Surprise üé•</h1>
    <video id="surpriseVideo" controls playsinline>
    <source src="surprise.mp4" type="video/mp4">
    Your browser does not support the video tag.
</video>
<!-- Final Note -->
</section>
<section id="finalNote" class="center hidden">
    <h1>Just One Last Thing üíñ</h1>
    <p class="final-text">
        A gili wali kisi üíã  
          
        <br>
        I love you ‚ù§Ô∏è
    </p>
</section>

<script>
const music = document.getElementById("bgMusic");
let muted = false;
let musicWasPlaying = false; // will track whether music was playing before video

function toggleMusic(){
    muted = !muted;
    music.muted = muted;
    document.getElementById("muteBtn").innerText = muted ? "üîá" : "üîä";
}

const letterText = `
Happy Birthday, my love.

We met online,
not knowing how special you would become to me.

No pictures, no meetings,
yet every word felt real,
every moment felt warm.

You turned simple chats into memories,
and ordinary days into something beautiful.

Today, I just want you to know ‚Äî
you mean more to me than words can say.

Happy Birthday ‚ù§Ô∏è
`;

let i = 0;

function openGift(){
    document.getElementById("landing").classList.add("hidden");
    document.getElementById("memories").classList.remove("hidden");

    music.currentTime = 0;
    music.muted = false;

    music.play().catch(err => {
        console.log("Music blocked:", err);
    });

    confetti();
}
document.body.addEventListener("click", () => {
    music.play().catch(()=>{});
}, { once:true });


function showLetter(){
    document.getElementById("memories").classList.add("hidden");
    document.getElementById("letterSection").classList.remove("hidden");
    typeLetter();
}

function typeLetter(){
    if(i < letterText.length){
        document.getElementById("letter").innerHTML += letterText.charAt(i);
        i++;
        setTimeout(typeLetter, 50);
    } else {
        setTimeout(showVideo, 2000);
    }
}

function showVideo(){
    document.getElementById("letterSection").classList.add("hidden");
    document.getElementById("videoSection").classList.remove("hidden");

    const vid = document.getElementById("surpriseVideo");

    // Attach handlers once to pause/resume music and toggle visual state
    if(!vid._handlersAdded){
        vid.addEventListener('play', ()=>{
            musicWasPlaying = !music.paused && !music.muted;
            if(musicWasPlaying){
                music.pause();
            }
            vid.classList.add('playing');
        });

        vid.addEventListener('pause', ()=>{
            if(musicWasPlaying){
                music.play().catch(()=>{});
            }
            vid.classList.remove('playing');
            musicWasPlaying = false;
        });

        vid.addEventListener('ended', ()=>{
            if(musicWasPlaying){
                music.play().catch(()=>{});
            }
            vid.classList.remove('playing');
            musicWasPlaying = false;

            // Hide video section, show final note and scroll to it
            setTimeout(()=>{
                const videoSec = document.getElementById('videoSection');
                if(videoSec) videoSec.classList.add('hidden');
                const final = document.getElementById('finalNote');
                if(final) {
                    final.classList.remove('hidden');
                    try{ final.scrollIntoView({behavior:'smooth', block:'center'}); }catch(e){}
                }
                // start kisses animation if available
                try{ startKisses(); }catch(e){}
            }, 400);
        });

        vid._handlersAdded = true;
    }

    vid.play().catch(()=>{});
}


/* Floating hearts */
setInterval(()=>{
    const h = document.createElement("div");
    h.className="heart";
    h.innerHTML = Math.random()>0.5 ? "‚ù§Ô∏è" : "‚ú®";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=Math.random()*22+16+"px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),7000);
},350);

/* Confetti */
function confetti(){
    for(let i=0;i<40;i++){
        const c=document.createElement("div");
        c.innerHTML="‚ú®";
        c.style.position="fixed";
        c.style.left=Math.random()*100+"vw";
        c.style.top="0";
        c.style.fontSize="22px";
        c.style.animation="float 3s linear";
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),3000);
    }
}
const photos = [
    "photo1.jpg",
    "photo2.jpg",
    "photo3.jpg",
    
];

/* Floating hearts (already present, keep it) */

/* Floating photos */
setInterval(()=>{
    const img = document.createElement("img");
    img.src = photos[Math.floor(Math.random()*photos.length)];
    img.className = "floating-img";
    img.style.left = Math.random()*100 + "vw";
    img.style.animationDuration = (Math.random()*4 + 7) + "s";
    document.body.appendChild(img);

    setTimeout(()=>img.remove(),10000);
}, 1200);
function startKisses(){
    setInterval(()=>{
        const kiss = document.createElement("div");
        kiss.className = "kiss";
        kiss.innerHTML = Math.random() > 0.5 ? "üíã" : "‚ù§Ô∏è";
        kiss.style.left = Math.random()*100 + "vw";
        document.body.appendChild(kiss);

        setTimeout(()=>kiss.remove(),5000);
    }, 400);
}

</script>

</body>
</html>
